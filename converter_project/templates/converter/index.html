{% extends "base.html" %}
{% load widget_tweaks %}
{% block content %}
  <div class="container">
    <h1 class="text-center">Binance currency converter</h1>
    <form action="{% url 'converter:get_offers' %}" method="post">
      {% csrf_token %}
      {% include 'converter/includes/currency_select_line.html' with currency=form.from_currency payment_methods=form.from_payment_methods amount=form.from_amount hx_target='#id_from_payment_methods' line_name='From' %}
      {% include 'converter/includes/currency_select_line.html' with currency=form.to_currency payment_methods=form.to_payment_methods amount=form.to_amount hx_target='#id_to_payment_methods' line_name='To' %}
      <div class="col-md-12 text-end">
        {% render_field form.is_merchant.label_tag %}
        {% render_field form.is_merchant %}
        <button type="submit" class="btn btn-primary btn-lg">Convert</button>
      </div>
    </form>
    <hr>
    {{ POST }}
    <hr>
    <p>
      Best conversion rate: {{ conversion_rate|floatformat:3 }}.
      Will convert {{ from_amount|floatformat:3 }} {{ from_currency }} to {{ to_amount|floatformat:3 }} {{ to_currency }}
    </p>
    <hr>
    {% for from_offer, to_offer in offers %}
      {% include 'converter/includes/offer_card.html' %}
    {% endfor %}
  </div>
{% endblock content %}
